<template>
  <v-form ref="form" v-model="valid">
    <v-container>
      <v-card class="px-10 py-5" style="border-radius: 15px;">
        <v-row>
          <v-col cols="12" md="12" class="text-center pa-0 mb-5">
            <v-btn class="mx-2" fab depressed large outlined color="indigo">
              <v-icon color="indigo">mdi-account</v-icon>
            </v-btn>
          </v-col>
          <v-col cols="12" md="12" class="px-0 px-md-2 px-sm-2 py-sm-7 py-1">
            <div class="text-center">
              <v-btn
                block
                rounded
                color="indigo"
                dark
                class="font-weight-black"
                style="background-color: #3f51b5 !important;
color: white !important;"
                to="/UserRegister"
                >ุซุจุช ูุงู ฺฉุงุฑุจุฑ</v-btn
              >
            </div>
          </v-col>
          <v-col cols="12" md="12" class="px-0 px-md-2 px-sm-2 py-sm-7 py-1">
            <div class="text-center">
              <v-btn
                block
                rounded
                color="indigo"
                dark
                class="font-weight-black"
                style="background-color: #3f51b5 !important;
color: white !important;"
                to="/AdvisorRegister"
                >ุซุจุช ูุงู ูุดุงูุฑ</v-btn
              >
            </div>
          </v-col>
          <v-col cols="12" md="12" class="px-0 px-md-2 px-sm-2 py-sm-7 py-1">
            <div class="text-center">
              <v-btn
                block
                rounded
                color="indigo"
                dark
                class="font-weight-black"
                style="background-color: #3f51b5 !important;
color: white !important;"
                to="/login"
                >ูุฑูุฏ ุจู ุญุณุงุจ ฺฉุงุฑุจุฑ</v-btn
              >
            </div>
          </v-col>
          <v-card max-width="100%" class="mx-auto" style="box-shadow: none;">
            <h5
              class="indigo--text pt-3 pb-2 text-center my-0"
              style="background: rgb(249, 241, 229) none repeat scroll 0% 0%;
color: red !important;
padding: 4px;
margin-top: 22px !important;"
            >
              ๐ถ ุงฺฏุฑ ูุตุฏ ุงุณุชูุงุฏู ุงุฒ ุฎุฏูุงุช ูุดุงูุฑู ุง ุขู ูุดุงูุฑ ุฑุง ุฏุงุฑุฏ ุงุฒ ฺฏุฒูู
              ุซุจุช ูุงู ฺฉุงุฑุจุฑ ุงุณุชูุงุฏู ฺฉูุฏ
            </h5>
            <h5
              class="indigo--text pt-3 pb-2 text-center my-0"
              style="background: rgb(249, 241, 229) none repeat scroll 0% 0%;
color: red !important;
padding: 4px;
margin-top: 22px !important;"
            >
              ๐น ุงฺฏุฑ ุชุตูู ุฏุงุฑุฏ ุจุนููุงู ูุดุงูุฑ ุง ูฺฉู ุฏุฑ ุขู ูุดุงูุฑ ูุนุงูุช ฺฉูุฏ
              ุงุฒ ฺฏุฒูู ุซุจุช ูุงู ูุดุงูุฑ ุงุณุชูุงุฏู ฺฉูุฏ
            </h5>
            <h5
              class="indigo--text pt-3 pb-2 text-center my-0"
              style="background: rgb(249, 241, 229) none repeat scroll 0% 0%;
color: red !important;
padding: 4px;
margin-top: 22px !important;"
            >
              ๐ถ ุฏุฑ ุตูุฑุช ฺฉู ูุจูุง ุฏุฑ ุขู ูุดุงูุฑ ุซุจุช ูุงู ฺฉุฑุฏู ุงุฏ ุงุฒ ฺฏุฒูู ูุฑูุฏ ุจู
              ุญุณุงุจ ฺฉุงุฑุจุฑ ุงุณุชูุงุฏู ฺฉูุฏ
            </h5>
          </v-card>
        </v-row>
      </v-card>
    </v-container>
  </v-form>
</template>

<script>
import { mapActions } from 'vuex'
export default {
  data: () => ({
    valid: false,
    name: '',
    family: '',
    email: '',
    mobile: '',
    password: '',
    items: ['ุฒู', 'ูุฑุฏ'],
    dialogm1: '',
    Specialty: false,
    Job: false,
    Rules: false,
    contracts: false,
    show1: false,
    message: '',
    nameRules: [
      (v) => !!v || 'ูุงู ุงุฌุจุงุฑ ุงุณุช',
      (v) => /^[\u0600-\u06FF\s]+$/.test(v) || 'ูุงู ุฑุง ูุงุฑุณ ูุงุฑุฏ ฺฉูุฏ'
    ],
    familyRules: [
      (v) => !!v || 'ูุงู ุฎุงููุงุฏฺฏ ุงุฌุจุงุฑ ุงุณุช',
      (v) => /^[\u0600-\u06FF\s]+$/.test(v) || 'ูุงู ุฎุงููุงุฏฺฏ ุฑุง ูุงุฑุณ ูุงุฑุฏ ฺฉูุฏ'
    ],
    mobileRules: [
      (v) => !!v || 'ุดูุงุฑู ููุจุงู ุงุฌุจุงุฑ ุงุณุช',
      (v) => /[1-4]/g.test(v) || 'ุดูุงุฑู ููุจุงู ูุนุชุจุฑ ูุณุช'
      // (v) => v.length === 11 || 'ุดูุงุฑู ููุจุงู ูุนุชุจุฑ ูุณุช'
    ],
    passwordRules: [
      (v) => !!v || 'ุฑูุฒ ูุฑูุฏ ุงุฌุจุงุฑ ุงุณุช'
      // v => v.length < 7 || 'ุฑูุฒ ุนุจูุฑ ุจุงุฏ ุจุดุชุฑ ุงุฒ ถ ุญุฑู  ุจุงุดุฏ'
    ],
    rules: {
      required: (value) => !!value || 'ุถุฑูุฑ',
      min: (v) => v.length >= 6 || 'ุญุฏุงูู ถ ฺฉุงุฑุงฺฉุชุฑ',
      emailMatch: () => 'ุฑูุฒ ุนุจูุฑ ฺฉูุชุฑ ุงุฒ ถ ฺฉุงุฑุงฺฉุชุฑ ุงุณุช'
    }
  }),
  methods: {
    ...mapActions('auth', ['authenticate']),
    ...mapActions('users', {
      createAccount: 'create'
    }),
    async onSubmit() {
      if (this.$refs.form.validate()) {
        const data = {
          password: this.password,
          mobile: this.mobile,
          name: this.name,
          email: '',
          family: this.family,
          userTypeId: 1,
          expertises: []
        }
        try {
          await this.createAccount(data)
          await this.authenticate({
            strategy: 'local',
            mobile: this.mobile,
            password: this.password
          })
          this.$router.push('/confirm')
        } catch (ex) {
          // this.$router.push('/confirm')
          this.message = ex
          console.log(ex)
        }
      }
    }
  }
}
</script>
